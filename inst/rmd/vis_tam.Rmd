---
title: "Tiny Assessment Model Dashboard"
output:
  flexdashboard::flex_dashboard:
    theme:
      version: 4
      bg: "#FFFFFF"   
      fg: "#000000"          
      primary: "#003e56"     
      secondary: "#fec124"   
      navbar-bg: "#007187"  
      navbar-fg: "#FFFFFF"
      link-color: "#028f8d"
      base_font:
        google: Poppins 
      heading_font:
        google: Poppins
      code_font:
        google:
          family: JetBrains Mono
          local: false
---


```{r setup, echo=FALSE}
library(tinyAM)
library(plotly)
knitr::opts_chunk$set(cache = FALSE)
```


```{r data, include=FALSE}

tabs <- tidy_tam(model_list = fits)
obs_pred <- tabs$obs_pred
pop <- tabs$pop

```


```{r helpers, include = FALSE}

"#3ADAC6"
"#ED79F9"

tam_cols <- c(
  "#003e56",
  "#007187",
  "#028f8d",
  "#2aaa85",
  "#93c25c",
  "#fec124",
  "#ffa31d",
  "#fe8427",
  "#f05c28"
)
tam_pal <- colorRampPalette(tam_cols)
cols <- tam_pal(length(fits))

make_resid_plots <- function(d) {
  list(bubbles = plot_bubbles(d, frame = ~model, colors = c(tam_cols[1], tam_cols[9])),
       year = plot_resid(d, x = ~year, xlab = "Year", frame = ~model, color = ~model, colors = cols),
       age = plot_resid(d, x = ~age, xlab = "Age", frame = ~model, color = ~model, colors = cols),
       cohort = plot_resid(d, x = ~(year - age), xlab = "Cohort", frame = ~model, color = ~model, colors = cols),
       expected = plot_resid(d, x = ~log(pred), xlab = "Expected", frame = ~model, color = ~model, colors = cols))
}

```

```{r fishery, child = "fishery.Rmd"}
```

```{r surveys, child = "surveys.Rmd"}
```

```{r trends, child = "trends.Rmd"}
```

<!--{r tables, child = "tables.Rmd"}-->







