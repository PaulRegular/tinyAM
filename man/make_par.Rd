% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/par.R
\name{make_par}
\alias{make_par}
\title{Initialize parameter list for TAM}
\usage{
make_par(dat)
}
\arguments{
\item{dat}{A data list returned by \code{\link[=make_dat]{make_dat()}}, containing design matrices,
settings, and observation mappings. The shapes and presence/absence of
parameters depend on elements in \code{dat} (e.g., \code{F_modmat}, \code{M_modmat},
\code{q_modmat}, \code{sd_catch_modmat}, \code{sd_index_modmat}, \code{N_settings}, \code{F_settings},
\code{M_settings}, \code{years}, \code{ages}, and \code{M_settings$age_blocks}).}
}
\value{
A named list of initialized parameters suitable to pass to the TAM objective
function, with elements as described in \strong{Details}. All numeric entries are
initialized to \code{0} (or the correct length filled with \code{0}), and matrices have
informative \code{dimnames}.
}
\description{
\code{make_par()} builds a named list of initial values and shapes for all
fixed and random-effect parameters used by TAM, based on the structure in
a previously constructed \code{dat} list (see \code{\link[=make_dat]{make_dat()}}).
}
\details{
The function inspects \code{dat} to decide which parameters are required and what
their dimensions should be. For example, if \code{dat$F_settings$process == "ar1"}
it initializes a 2-vector \code{logit_phi_f}; if \code{dat$F_settings$mu_form} is not
\code{NULL} it creates a coefficient vector \code{log_mu_f} of length
\code{ncol(dat$F_modmat)}, and so on.

All numeric parameters are initialized at \code{0}, and all matrices are created
with appropriate \code{dimnames} (\verb{year × age} or \verb{year × age_block}).

\strong{Created elements (when applicable) include:}
\itemize{
\item \strong{Recruitment & variability}
\itemize{
\item \code{log_r0} (only if \code{dat$N_settings$init_N0})
\item \code{log_r} (length \code{length(dat$years)})
\item \code{log_sd_r}
}
\item \strong{Abundance deviations (N)}
\itemize{
\item \code{log_sd_n} (if \code{dat$N_settings$process != "off"})
\item \code{logit_phi_n} length 2 (if \code{process == "ar1"})
\item \code{log_n} matrix (\code{year} × \code{age[-1]}) if \code{process != "off"}
}
\item \strong{Fishing mortality (F)}
\itemize{
\item \code{log_sd_f}
\item \code{logit_phi_f} length 2 (if \code{process == "ar1"})
\item \code{log_mu_f} coefficients (length \code{ncol(dat$F_modmat)}) if a mean structure was supplied
\item \code{log_f} matrix (\code{year} × \code{age})
}
\item \strong{Natural mortality (M)}
\itemize{
\item \code{log_sd_m} (if \code{dat$M_settings$process != "off"})
\item \code{logit_phi_m} length 2 (if \code{process == "ar1"})
\item \code{log_mu_m} coefficients (length \code{ncol(dat$M_modmat)}) if a mean structure was supplied
\item \code{log_m} matrix (\code{year[-1]} × \code{age_block}) if \code{process != "off"}, with
\code{age_block = levels(dat$M_settings$age_blocks)}
}
\item \strong{Observation model}
\itemize{
\item \code{log_sd_catch} (length \code{ncol(dat$sd_catch_modmat)})
\item \code{log_sd_index} (length \code{ncol(dat$sd_index_modmat)})
\item \code{log_q} (length \code{ncol(dat$q_modmat)})
\item \code{missing} vector of length \code{sum(is.na(dat$log_obs))} (placeholders for
imputed \code{log_obs})
}
}

All scalar SD parameters are on the log scale, and AR(1) parameters are on
the logit scale (later transformed by \code{plogis()} in the likelihood).
}
\examples{
dat <- make_dat(
  cod_obs,
  years = 1983:2024,
  ages = 2:14,
  N_settings = list(process = "iid", init_N0 = FALSE),
  F_settings = list(process = "approx_rw", mu_form = NULL),
  M_settings = list(process = "off", assumption = ~ I(0.3)),
  obs_settings = list(sd_catch_form = ~ 1, sd_index_form = ~ 1, q_form = ~ q_block)
)
par <- make_par(dat)
str(par)

}
\seealso{
\code{\link[=make_dat]{make_dat()}}
}
