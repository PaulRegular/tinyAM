% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/plot.R
\name{plot_tam}
\alias{plot_tam}
\alias{plot_trend}
\alias{plot_heatmap}
\alias{plot_obs_pred}
\alias{plot_bubbles}
\alias{plot_resid}
\alias{plot_par}
\title{Plot utilities for \code{tidy_tam()} outputs}
\usage{
plot_trend(
  data,
  x = ~year,
  y = ~est,
  xlab = "Year",
  ylab = "",
  title = "",
  add_intervals = TRUE,
  add_buttons = TRUE,
  ...
)

plot_heatmap(data, zlab = "Estimate", title = "", ...)

plot_obs_pred(data, ylab = "", title = "", add_buttons = TRUE, ...)

plot_bubbles(data, ...)

plot_resid(data, x = ~year, xlab = "Year", ...)

plot_par(data, ...)
}
\arguments{
\item{data}{A data frame of observations or estimates.}

\item{x}{Formula specifying x variable}

\item{y}{Formula specifying y variable}

\item{xlab}{Label for the x-axis.}

\item{ylab}{Label for the y-axis.}

\item{title}{Plot title.}

\item{add_intervals}{Logical; if \code{TRUE}, show confidence intervals when \code{lwr} and \code{upr} are present.}

\item{add_buttons}{Logical; if \code{TRUE}, include buttons to toggle y-axis between Linear / Log and, if
applicable, Show CI / Hide CI.}

\item{...}{Additional arguments to pass to \code{\link[plotly:plot_ly]{plotly::plot_ly()}} such as \code{color}, \code{colors}, etc.}

\item{zlab}{Label for the colorbar in heatmaps.}
}
\value{
A Plotly object.
}
\description{
These functions provide minimal, Plotly-based visualizations for outputs
from \code{\link[=tidy_tam]{tidy_tam()}} and related TAM model objects:
}
\details{
\itemize{
\item \code{plot_trend()}: time‐series trends with optional confidence ribbons.
\item \code{plot_heatmap()}: age × year heatmaps for matrix quantities (e.g., \code{F}, \code{M}, \code{N}).
\item \code{plot_obs_pred()}: observed vs predicted fits by year.
\item \code{plot_bubbles()}: residuals (OSA or standardized) as bubbles by age × year.
\item \code{plot_resid()}: residual diagnostics vs year, cohort, age, and expected values.
}
}
\examples{

## Fit two models ----
N_dev <- fit_tam(
  cod_obs, years = 1983:2024, ages = 2:14,
  N_settings = list(process = "iid", init_N0 = FALSE),
  F_settings = list(process = "approx_rw", mu_form = NULL),
  M_settings = list(process = "off", assumption = ~ I(0.3)),
  proj_settings = list(n_proj = 3, n_mean = 3, F_mult = 1),
  silent = TRUE
)
M_dev <- update(
  N_dev,
  N_settings = list(process = "off", init_N0 = TRUE),
  M_settings = list(process = "ar1", assumption = ~ I(0.3),
                    age_breaks = c(3, 14))
)

## Combine model objects into named list ----
fits <- list("N_dev" = N_dev, "M_dev" = M_dev)

## Stack outputs ----
tabs <- tidy_tam(model_list = fits)

## Trend plots ----
plot_trend(N_dev$pop$biomass, ylab = "Biomass")
plot_trend(tabs$pop$biomass, color = ~model, ylab = "Biomass")

N_dev$pop$N |>
  subset(age \%in\% 2:8) |>
  plot_trend(ylab = "N", color = ~as.character(age))

## Age-Year Heatmap ----
plot_heatmap(N_dev$pop$F, zlab = "F")
plot_heatmap(M_dev$pop$F, zlab = "F")

## Observed vs Predicted ----
plot_obs_pred(N_dev$obs_pred$catch, frame = ~age, ylab = "Catch")
plot_obs_pred(tabs$obs_pred$index,
              color = ~model, legendgroup = ~model,
              frame = ~age, ylab = "Index")

## Residual Bubbles ----
plot_bubbles(N_dev$obs_pred$catch)
plot_bubbles(tabs$obs_pred$index, frame = ~model)

## Residual Scatter ----
plot_resid(N_dev$obs_pred$catch, x = ~age, xlab = "Age")
plot_resid(tabs$obs_pred$index, frame = ~model,
            x = ~year, xlab = "Year", showlegend = FALSE)

## Parameter Estimates ----
plot_par(N_dev$fixed_par)
plot_par(tabs$fixed_par, color = ~model)

}
